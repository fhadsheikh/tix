"use strict";angular.module("tixApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","pusher-angular","ngtimeago"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("tixApp").controller("MainCtrl",["$scope","$pusher","$interval","$http","LINKS","$timeout",function(a,b,c,d,e,f){var g=new Pusher("2be55f84069c8f50ee29"),h=b(g),i=h.subscribe("tix");i.bind("support",function(b){a.expiredclients=b.expiredClients,a.expiringclients=b.expiringClients}),i.bind("tickets",function(b){a.stats=null,a.stats=[{number:b.open,title:"Open Tickets"},{number:b.unassigned,title:"Unassigned"},{number:b.critical,title:"Critical"},{number:b.stale,title:"Stale"},{number:b.opened,title:"Opened"},{number:b.closed,title:"Closed"},{number:b.workorders.pending,title:"Pending W/O"},{number:b.workorders.approved,title:"Approved W/O"}]}),i.bind("techs",function(b){a.techs=null,a.techs=b}),i.bind("newsletter",function(b){a.newsletterSubs={},a.newsletterSubs.count=b.count,a.newsletterSubs.percent=100*b.count/50}),f(function(){d.get(e.url+"/tv/newsletter")},1e3),f(function(){d.get(e.url+"/tv/tickets").success(function(){}).error(function(){})},0),f(function(){d.get(e.url+"/tv/support").success(function(){}).error(function(){})},5e3),f(function(){d.get(e.url+"/tv/techs").success(function(){}).error(function(){})},1e4),f(function(){d.get(e.url+"/tv/comments").success(function(){}).error(function(){})},1e4),c(function(){d.get(e.url+"/tv/tickets").success(function(){}).error(function(){})},2e4),c(function(){d.get(e.url+"/tv/techs").success(function(){}).error(function(){})},3e4),c(function(){d.get(e.url+"/tv/support").success(function(){}).error(function(){})},6e4),c(function(){d.get(e.url+"/tv/newsletter")},6e4)}]),angular.module("tixApp").constant("LINKS",{url:"http://apps/tsk"}),angular.module("tixApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row"> <div class="col-md-6"> <div class="card" ng-animate="\'animate\'" ng-repeat="tech in techs | orderBy: \'-Closed\'" ng-style="{ \'top\': country.position * 20 + \'px\' }"> <div class="row"> <div class="col-md-12"> <div class="title">{{tech.name}} <span style="float:right">{{tech.Total}} open | <span style="color:#ff6e6e">{{tech.Closed}} closed</span></span></div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="progress progress-striped active"> <div class="progress-bar progress-bar-success" style="width: {{tech.PercentStaff}}%"></div> <div class="progress-bar progress-bar-warning" style="width: {{tech.PercentClient}}%"></div> <div class="progress-bar progress-bar-info" style="width: {{tech.PercentTech}}%"></div> <div class="progress-bar progress-bar-danger" style="width: {{tech.PercentNew}}%"></div> </div> </div> </div> </div> </div> <div class="col-md-6"> <div class="card"> <div class="support-title">Expired Support</div> <hr> <ul class="client-list"> <li ng-repeat="client in expiredclients"><i class="fa fa-thumbs-o-down"></i> {{client.name}} <span style="float:right;font-size:14pt;padding-top:7px">{{client.date | timeago}}</span></li> </ul> </div> <div class="card"> <div class="support-title">Expiring Soon</div> <hr> <ul class="client-list"> <li ng-repeat="client in expiringclients"><i class="fa fa-hand-stop-o"></i> {{client.name}} <span style="float:right;font-size:14pt;padding-top:7px">{{client.date | timeago}}</span></li> </ul> </div> </div> </div> <div class="row"> <div class="col-md-3" ng-repeat="stat in stats"> <div class="card"> <div class="row"> <div class="col-md-3"> <div class="big-title">{{stat.number}}</div> </div> <div class="col-md-9" style="padding:0px"> <div class="subtitle">{{stat.title}}</div> </div> </div> </div> </div> <div class="col-md-12"> <div class="card"> <div class="row"> <div class="col-md-5"> <div class="big-title">{{newsletterSubs.count}}</div> </div> <div class="col-md-6" style="padding:0px"> <div class="subtitle">Newsletter Subscribers</div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="progress progress-striped active"> <div class="progress-bar progress-bar-danger" style="width:{{newsletterSubs.percent}}%"></div> </div> </div> </div> </div> </div> </div> <div class="row comment" style="margin-top:10px;position:absolute;bottom:0px;width:100%;overflow:hidden" ng-show="comment"> <div class="col-md-12"> <div class="alert alert-dismissible alert-info" style="font-size:22pt"> {{Date}} - <strong>{{Name}}</strong> {{Preview}} - <em>{{Subject}}</em> </div> </div> </div>')}]);